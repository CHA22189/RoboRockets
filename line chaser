#include <kipr/wombat.h>
int vel = 50;
int move(vel);
int grab(void);
int main(void){
    enable_servos();
    set_servo_position(0,200);
    set_servo_position(1, 300);
    printf("Initiating\n");
    while (1==1)
    {
        move(vel);
        grab();
    }
    return 0;
}
int grab(void) 
{
    if(analog(2) > 2899) 
    {
        motor(0,-30);
        motor(1,-30);
    }
}


int move(vel)
{
    bool drive_left = true;
    bool drive_right = true;
    if (analog(0) > 3000 && analog(1) > 3000)
    {
        drive_left = true;
        drive_right = true;
    }
    else if (analog (0) > 3000) 
    {
        drive_left = false;
    }
    else if (analog(1) > 3000) 
    {
        drive_right = false;
    }

    if (drive_left && drive_right) 
    {
        printf("Both\n");
        motor(0, vel);
        motor(1, vel);
    }
    else if (drive_left) 
    {
        printf("left\n");
        motor(0, vel);
        motor(1, 0);
    }
    else if(drive_right)
    {
        printf("right\n");
        motor(0,0);
        motor(1,vel);
    }
}